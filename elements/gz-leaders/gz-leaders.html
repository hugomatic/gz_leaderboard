

<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/core-ajax/core-ajax.html">

<polymer-element name="gz-leaders" attributes="">

    <template>
        <core-ajax auto url="/api/db"
            params='{}'
            handleAs="json" response="{{response}}"></core-ajax>
<!--

  {
    "username":"hugo",
    "Event":{
        "session":"b477fedb-9f6e-42c3-a42d-0bde6e080a4e",
        "name":"Can1_in_0_0",
        "type":"region",
        "data":{
            "state":"inside",
            "region":"start",
            "model":"can1"},
         "world":{
             "name":"default",
             "paused":"false",
             "clock_time":"2015-03-12T11:18:32.474003",
             "real_time":"00 00:00:00.002",
             "sim_time":"00 00:00:00.001",
             "pause_time":"00 00:00:00.000"
          }
       }
   }"

-->
        <script>
            console.log('XXX STAMP XXX');
        </script>
        <br>
        <br>
        <br>
        <template repeat="{{e in response.events}}">
            <div>
                session: {{e.Event.session}}<br>
                user: {{e.username}}<br>
                t: {{e.Event.world.sim_time}}<br>
                event: {{e.Event.name}}<br>
                type: ({{e.Event.type}})<br>
                data: {{data(e)}}<br>
                ------------------<br>
            </div>
        </template>
    </template>

    <script>
    Polymer({
        response: null,
        data: function(e)
        {
            console.log(e)
            return JSON.stringify(e.Event.data)
        },
        sorting: "Cumulative",
        sortingChanged: function() {
            console.log('SORTING CHANGED to ' + this.sorting)
            console.log(this.response)
        }
    });
    </script>

</polymer-element>
